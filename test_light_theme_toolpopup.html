<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>亮色主题 Toolpopup 测试</title>
    <style>
        /* 强制设置为亮色主题 */
        :root {
            color-scheme: light;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            margin: 40px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .test-section h2 {
            color: #34495e;
            margin-top: 0;
        }

        .theme-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .theme-controls button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #3498db;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .theme-controls button:hover {
            background: #2980b9;
        }

        .theme-controls button.active {
            background: #e74c3c;
        }

        /* 高亮词汇样式 */
        .test-word {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            padding: 2px 4px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: 500;
        }

        .instructions {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            margin-bottom: 20px;
        }

        .instructions h3 {
            margin-top: 0;
            color: #2980b9;
        }

        .debug-info {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 20px;
        }

        /* 模拟 toolpopup 样式用于测试 */
        .mock-toolpopup {
            position: relative;
            display: inline-block;
            margin: 10px;
            padding: 20px;
            width: 300px;
            border-radius: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            user-select: none;
        }

        .mock-toolpopup.dark-theme {
            /* 默认主题（暗色）- 与实际 toolpopup 一致 */
            background: rgba(40, 40, 40, 0.9);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: none;
        }

        .mock-toolpopup.light-theme {
            /* 亮色主题 - 与实际 toolpopup 一致 */
            background: rgba(240, 240, 240, 0.4);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: rgba(20, 20, 20, 0.9);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .mock-word {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .mock-word.dark-theme {
            color: #f0f0f0;
        }

        .mock-word.light-theme {
            color: #333;
        }

        .mock-definition {
            font-size: 14px;
            line-height: 1.6;
        }

        .mock-definition.dark-theme {
            color: #ddd;
        }

        .mock-definition.light-theme {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌞 亮色主题 Toolpopup 测试</h1>
        
        <div class="instructions">
            <h3>📋 测试说明</h3>
            <ul>
                <li><strong>主题切换</strong>：使用下方按钮切换亮色/暗色主题</li>
                <li><strong>鼠标悬停</strong>：在高亮词汇上悬停查看 tooltip</li>
                <li><strong>Shift + 悬停</strong>：按住 Shift 键悬停查看 toolpopup</li>
                <li><strong>预期效果</strong>：
                    <ul>
                        <li><strong>默认主题（暗色）</strong>：深色毛玻璃背景 rgba(40, 40, 40, 0.9)</li>
                        <li><strong>亮色主题</strong>：浅色毛玻璃背景 rgba(240, 240, 240, 0.4)</li>
                        <li>两个主题独立定义，类似 .lucid-tooltip-content 的结构</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="theme-controls">
            <span>主题切换：</span>
            <button id="lightTheme" class="active" onclick="setTheme('light')">亮色主题</button>
            <button id="darkTheme" onclick="setTheme('dark')">暗色主题</button>
            <span id="currentTheme">当前: 亮色主题</span>
        </div>

        <div class="test-section">
            <h2>📝 测试文本区域</h2>
            <p>这里有一些 <span class="test-word">beautiful</span> 词汇用于测试。尝试悬停在 <span class="test-word">amazing</span> 和 <span class="test-word">fantastic</span> 上查看 tooltip 和 toolpopup 的主题适配效果。</p>
            
            <p>在亮色主题下，toolpopup 应该显示为浅色毛玻璃效果，而在暗色主题下应该显示为深色毛玻璃效果。</p>

            <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 15px;">
                <span class="test-word">wonderful</span>
                <span class="test-word">incredible</span>
                <span class="test-word">system</span>
                <span class="test-word">dynamic</span>
                <span class="test-word">tooltip</span>
                <span class="test-word">toolpopup</span>
            </div>
        </div>

        <div class="test-section">
            <h2>🎨 模拟 Toolpopup 样式对比</h2>
            <p>以下是模拟的 toolpopup 样式，用于直观对比亮色和暗色主题的效果：</p>
            
            <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <div class="mock-toolpopup dark-theme">
                    <div class="mock-word dark-theme">beautiful</div>
                    <div class="mock-definition dark-theme">adj. 美丽的，漂亮的</div>
                    <div style="margin-top: 10px; font-size: 12px; opacity: 0.7;">默认主题（暗色）</div>
                    <div style="font-size: 11px; color: rgba(255,255,255,0.5);">rgba(40, 40, 40, 0.9)</div>
                </div>

                <div class="mock-toolpopup light-theme">
                    <div class="mock-word light-theme">beautiful</div>
                    <div class="mock-definition light-theme">adj. 美丽的，漂亮的</div>
                    <div style="margin-top: 10px; font-size: 12px; opacity: 0.7;">亮色主题</div>
                    <div style="font-size: 11px; color: rgba(0,0,0,0.5);">rgba(240, 240, 240, 0.4)</div>
                </div>
            </div>
        </div>

        <div class="debug-info">
            <h3>🔍 调试信息</h3>
            <div id="debugInfo">
                <p>当前主题检测结果...</p>
            </div>
        </div>
    </div>

    <script>
        // 设置主题
        function setTheme(theme) {
            const root = document.documentElement;
            
            if (theme === 'light') {
                root.style.colorScheme = 'light';
                document.getElementById('lightTheme').classList.add('active');
                document.getElementById('darkTheme').classList.remove('active');
                document.getElementById('currentTheme').textContent = '当前: 亮色主题';
            } else {
                root.style.colorScheme = 'dark';
                document.getElementById('darkTheme').classList.add('active');
                document.getElementById('lightTheme').classList.remove('active');
                document.getElementById('currentTheme').textContent = '当前: 暗色主题';
            }
            
            updateDebugInfo();
        }

        // 更新调试信息
        function updateDebugInfo() {
            const colorScheme = getComputedStyle(document.documentElement).colorScheme;
            const prefersColorScheme = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
            
            document.getElementById('debugInfo').innerHTML = `
                <p><strong>CSS color-scheme:</strong> ${colorScheme}</p>
                <p><strong>系统偏好主题:</strong> ${prefersColorScheme}</p>
                <p><strong>@media (prefers-color-scheme: light) 匹配:</strong> ${window.matchMedia('(prefers-color-scheme: light)').matches}</p>
                <p><strong>@media (prefers-color-scheme: dark) 匹配:</strong> ${window.matchMedia('(prefers-color-scheme: dark)').matches}</p>
                <p><em>悬停在高亮词汇上测试实际 toolpopup 主题效果</em></p>
            `;
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateDebugInfo();
            
            // 监听系统主题变化
            window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', updateDebugInfo);
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateDebugInfo);
        });
    </script>
</body>
</html>
