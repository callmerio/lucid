<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº®è‰²ä¸»é¢˜ Toolpopup æµ‹è¯•</title>
    <style>
        /* å¼ºåˆ¶è®¾ç½®ä¸ºäº®è‰²ä¸»é¢˜ */
        :root {
            color-scheme: light;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            margin: 40px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .test-section h2 {
            color: #34495e;
            margin-top: 0;
        }

        .theme-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .theme-controls button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #3498db;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .theme-controls button:hover {
            background: #2980b9;
        }

        .theme-controls button.active {
            background: #e74c3c;
        }

        /* é«˜äº®è¯æ±‡æ ·å¼ */
        .test-word {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            padding: 2px 4px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: 500;
        }

        .instructions {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            margin-bottom: 20px;
        }

        .instructions h3 {
            margin-top: 0;
            color: #2980b9;
        }

        .debug-info {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 20px;
        }

        /* æ¨¡æ‹Ÿ toolpopup æ ·å¼ç”¨äºæµ‹è¯• */
        .mock-toolpopup {
            position: relative;
            display: inline-block;
            margin: 10px;
            padding: 20px;
            width: 300px;
            border-radius: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            user-select: none;
        }

        .mock-toolpopup.dark-theme {
            /* é»˜è®¤ä¸»é¢˜ï¼ˆæš—è‰²ï¼‰- ä¸å®é™… toolpopup ä¸€è‡´ */
            background: rgba(40, 40, 40, 0.9);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: none;
        }

        .mock-toolpopup.light-theme {
            /* äº®è‰²ä¸»é¢˜ - ä¸å®é™… toolpopup ä¸€è‡´ */
            background: rgba(240, 240, 240, 0.4);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: rgba(20, 20, 20, 0.9);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .mock-word {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .mock-word.dark-theme {
            color: #f0f0f0;
        }

        .mock-word.light-theme {
            color: #333;
        }

        .mock-definition {
            font-size: 14px;
            line-height: 1.6;
        }

        .mock-definition.dark-theme {
            color: #ddd;
        }

        .mock-definition.light-theme {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ äº®è‰²ä¸»é¢˜ Toolpopup æµ‹è¯•</h1>
        
        <div class="instructions">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <ul>
                <li><strong>ä¸»é¢˜åˆ‡æ¢</strong>ï¼šä½¿ç”¨ä¸‹æ–¹æŒ‰é’®åˆ‡æ¢äº®è‰²/æš—è‰²ä¸»é¢˜</li>
                <li><strong>é¼ æ ‡æ‚¬åœ</strong>ï¼šåœ¨é«˜äº®è¯æ±‡ä¸Šæ‚¬åœæŸ¥çœ‹ tooltip</li>
                <li><strong>Shift + æ‚¬åœ</strong>ï¼šæŒ‰ä½ Shift é”®æ‚¬åœæŸ¥çœ‹ toolpopup</li>
                <li><strong>é¢„æœŸæ•ˆæœ</strong>ï¼š
                    <ul>
                        <li><strong>é»˜è®¤ä¸»é¢˜ï¼ˆæš—è‰²ï¼‰</strong>ï¼šæ·±è‰²æ¯›ç»ç’ƒèƒŒæ™¯ rgba(40, 40, 40, 0.9)</li>
                        <li><strong>äº®è‰²ä¸»é¢˜</strong>ï¼šæµ…è‰²æ¯›ç»ç’ƒèƒŒæ™¯ rgba(240, 240, 240, 0.4)</li>
                        <li>ä¸¤ä¸ªä¸»é¢˜ç‹¬ç«‹å®šä¹‰ï¼Œç±»ä¼¼ .lucid-tooltip-content çš„ç»“æ„</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="theme-controls">
            <span>ä¸»é¢˜åˆ‡æ¢ï¼š</span>
            <button id="lightTheme" class="active" onclick="setTheme('light')">äº®è‰²ä¸»é¢˜</button>
            <button id="darkTheme" onclick="setTheme('dark')">æš—è‰²ä¸»é¢˜</button>
            <span id="currentTheme">å½“å‰: äº®è‰²ä¸»é¢˜</span>
        </div>

        <div class="test-section">
            <h2>ğŸ“ æµ‹è¯•æ–‡æœ¬åŒºåŸŸ</h2>
            <p>è¿™é‡Œæœ‰ä¸€äº› <span class="test-word">beautiful</span> è¯æ±‡ç”¨äºæµ‹è¯•ã€‚å°è¯•æ‚¬åœåœ¨ <span class="test-word">amazing</span> å’Œ <span class="test-word">fantastic</span> ä¸ŠæŸ¥çœ‹ tooltip å’Œ toolpopup çš„ä¸»é¢˜é€‚é…æ•ˆæœã€‚</p>
            
            <p>åœ¨äº®è‰²ä¸»é¢˜ä¸‹ï¼Œtoolpopup åº”è¯¥æ˜¾ç¤ºä¸ºæµ…è‰²æ¯›ç»ç’ƒæ•ˆæœï¼Œè€Œåœ¨æš—è‰²ä¸»é¢˜ä¸‹åº”è¯¥æ˜¾ç¤ºä¸ºæ·±è‰²æ¯›ç»ç’ƒæ•ˆæœã€‚</p>

            <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 15px;">
                <span class="test-word">wonderful</span>
                <span class="test-word">incredible</span>
                <span class="test-word">system</span>
                <span class="test-word">dynamic</span>
                <span class="test-word">tooltip</span>
                <span class="test-word">toolpopup</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ¨ æ¨¡æ‹Ÿ Toolpopup æ ·å¼å¯¹æ¯”</h2>
            <p>ä»¥ä¸‹æ˜¯æ¨¡æ‹Ÿçš„ toolpopup æ ·å¼ï¼Œç”¨äºç›´è§‚å¯¹æ¯”äº®è‰²å’Œæš—è‰²ä¸»é¢˜çš„æ•ˆæœï¼š</p>
            
            <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <div class="mock-toolpopup dark-theme">
                    <div class="mock-word dark-theme">beautiful</div>
                    <div class="mock-definition dark-theme">adj. ç¾ä¸½çš„ï¼Œæ¼‚äº®çš„</div>
                    <div style="margin-top: 10px; font-size: 12px; opacity: 0.7;">é»˜è®¤ä¸»é¢˜ï¼ˆæš—è‰²ï¼‰</div>
                    <div style="font-size: 11px; color: rgba(255,255,255,0.5);">rgba(40, 40, 40, 0.9)</div>
                </div>

                <div class="mock-toolpopup light-theme">
                    <div class="mock-word light-theme">beautiful</div>
                    <div class="mock-definition light-theme">adj. ç¾ä¸½çš„ï¼Œæ¼‚äº®çš„</div>
                    <div style="margin-top: 10px; font-size: 12px; opacity: 0.7;">äº®è‰²ä¸»é¢˜</div>
                    <div style="font-size: 11px; color: rgba(0,0,0,0.5);">rgba(240, 240, 240, 0.4)</div>
                </div>
            </div>
        </div>

        <div class="debug-info">
            <h3>ğŸ” è°ƒè¯•ä¿¡æ¯</h3>
            <div id="debugInfo">
                <p>å½“å‰ä¸»é¢˜æ£€æµ‹ç»“æœ...</p>
            </div>
        </div>
    </div>

    <script>
        // è®¾ç½®ä¸»é¢˜
        function setTheme(theme) {
            const root = document.documentElement;
            
            if (theme === 'light') {
                root.style.colorScheme = 'light';
                document.getElementById('lightTheme').classList.add('active');
                document.getElementById('darkTheme').classList.remove('active');
                document.getElementById('currentTheme').textContent = 'å½“å‰: äº®è‰²ä¸»é¢˜';
            } else {
                root.style.colorScheme = 'dark';
                document.getElementById('darkTheme').classList.add('active');
                document.getElementById('lightTheme').classList.remove('active');
                document.getElementById('currentTheme').textContent = 'å½“å‰: æš—è‰²ä¸»é¢˜';
            }
            
            updateDebugInfo();
        }

        // æ›´æ–°è°ƒè¯•ä¿¡æ¯
        function updateDebugInfo() {
            const colorScheme = getComputedStyle(document.documentElement).colorScheme;
            const prefersColorScheme = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
            
            document.getElementById('debugInfo').innerHTML = `
                <p><strong>CSS color-scheme:</strong> ${colorScheme}</p>
                <p><strong>ç³»ç»Ÿåå¥½ä¸»é¢˜:</strong> ${prefersColorScheme}</p>
                <p><strong>@media (prefers-color-scheme: light) åŒ¹é…:</strong> ${window.matchMedia('(prefers-color-scheme: light)').matches}</p>
                <p><strong>@media (prefers-color-scheme: dark) åŒ¹é…:</strong> ${window.matchMedia('(prefers-color-scheme: dark)').matches}</p>
                <p><em>æ‚¬åœåœ¨é«˜äº®è¯æ±‡ä¸Šæµ‹è¯•å®é™… toolpopup ä¸»é¢˜æ•ˆæœ</em></p>
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateDebugInfo();
            
            // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
            window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', updateDebugInfo);
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateDebugInfo);
        });
    </script>
</body>
</html>
