<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltip 图标动画方向测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }

        .test-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }

        .instructions {
            background: #f8f9fa;
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .instructions h3 {
            margin-top: 0;
            color: #dc3545;
        }

        .test-section {
            margin: 30px 0;
            padding: 25px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: #ffffff;
        }

        .test-section h3 {
            color: #495057;
            margin-top: 0;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }

        .test-text {
            font-size: 18px;
            line-height: 2;
            margin: 20px 0;
        }

        .highlight-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
            color: #856404;
        }

        .animation-demo {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .animation-demo h4 {
            margin-top: 0;
            color: #6c757d;
        }

        .demo-tooltip {
            display: inline-block;
            background: rgba(40, 40, 40, 0.9);
            color: white;
            padding: 8px 10px;
            border-radius: 6px;
            margin: 10px;
            position: relative;
            font-size: 14px;
            min-height: 24px;
            display: flex;
            align-items: center;
        }

        .demo-tooltip-expanded {
            background: rgba(40, 40, 40, 0.9);
            color: white;
            padding: 8px 10px;
            border-radius: 6px;
            margin: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            min-height: 24px;
            animation: expand-demo 2s ease-in-out infinite;
        }

        .demo-btn {
            width: 20px;
            height: 20px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: slide-in-demo 2s ease-in-out infinite;
        }

        .demo-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            animation: heartbeat-demo 1.2s ease-in-out infinite;
        }

        .demo-heart {
            transform: scale(0.7);
        }

        /* 演示动画 */
        @keyframes slide-in-demo {
            0%, 25% {
                opacity: 0;
                transform: translateX(15px) scale(0.8);
            }
            50%, 75% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateX(-15px) scale(0.8);
            }
        }

        @keyframes expand-demo {
            0%, 50% {
                width: 200px;
            }
            100% {
                width: 280px;
            }
        }

        @keyframes heartbeat-demo {
            0% { transform: scale(1); }
            14% { transform: scale(1.15); }
            28% { transform: scale(1); }
            42% { transform: scale(1.15); }
            70% { transform: scale(1); }
        }

        .expected-result {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .expected-result strong {
            color: #155724;
        }

        .step-indicator {
            display: inline-block;
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 8px;
        }

        .direction-arrow {
            font-size: 24px;
            color: #28a745;
            margin: 0 10px;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🎯 Tooltip 图标动画方向测试</h1>

        <div class="instructions">
            <h3>📋 动画方向检查</h3>
            <p>检查 tooltip 右侧两个图标的动画出现方向是否正确：应该从右侧滑入，向左侧滑出。</p>

            <h4>🎯 测试步骤：</h4>
            <ol>
                <li><span class="step-indicator">步骤1</span>选择下面的英文单词，按 <kbd>Shift</kbd> 键进行高亮</li>
                <li><span class="step-indicator">步骤2</span>将鼠标悬停在高亮的单词上，显示基础 tooltip</li>
                <li><span class="step-indicator">步骤3</span>将鼠标移动到 tooltip 的右侧 2/5 区域</li>
                <li><span class="step-indicator">步骤4</span>观察图标动画：应该从右侧滑入 <span class="direction-arrow">→</span></li>
                <li><span class="step-indicator">步骤5</span>将鼠标移回左侧 1/3 区域</li>
                <li><span class="step-indicator">步骤6</span>观察图标动画：应该向左侧滑动消失 <span class="direction-arrow">←</span></li>
                <li><span class="step-indicator">步骤7</span>测试心跳动画：hover 图标时应该有心跳效果</li>
            </ol>

            <div class="expected-result">
                <strong>预期动画方向（已优化）：</strong>
                <ul>
                    <li><strong>出现：</strong>从右侧滑入 (translateX(15px) → translateX(0))</li>
                    <li><strong>消失：</strong>向左侧滑动消失 (translateX(0) → translateX(-15px))</li>
                    <li><strong>缩放：</strong>同时有缩放效果 (scale(0.8) → scale(1) → scale(0.8))</li>
                    <li><strong>心跳：</strong>hover 时 1.2s 心跳动画循环</li>
                </ul>
            </div>
        </div>

        <div class="animation-demo">
            <h4>🎨 动画效果演示</h4>
            <p><strong>基础状态：</strong></p>
            <div class="demo-tooltip">n. 框架; 结构; 体系</div>

            <p><strong>扩展状态（自动演示动画）：</strong></p>
            <div class="demo-tooltip-expanded">
                <span>n. 框架; 结构; 体系</span>
                <button class="demo-btn">▼</button>
                <button class="demo-btn"><span class="demo-heart">❤️</span></button>
            </div>

            <div class="highlight-info">
                💡 上面的演示会自动重复播放动画，展示图标从右侧滑入的效果
            </div>
        </div>

        <div class="test-section">
            <h3>实际测试文本</h3>
            <div class="test-text">
                The modern <strong>framework</strong> provides comprehensive <strong>documentation</strong> for developers. This utility-first <strong>design</strong> approach makes <strong>component</strong> development more efficient.
            </div>
            <div class="test-text">
                <strong>JavaScript</strong> and <strong>TypeScript</strong> are popular programming languages. <strong>React</strong> framework simplifies <strong>website</strong> development.
            </div>
            <div class="highlight-info">
                💡 测试词汇：framework, documentation, design, component, JavaScript, TypeScript, React, website
            </div>
        </div>

        <div class="test-section">
            <h3>技术实现检查</h3>
            <p><strong>当前动画实现：</strong></p>

            <div class="code-block">
<strong>CSS 初始状态：</strong>
.lucid-tooltip-actions {
  opacity: 0;
  transform: translateX(15px) scale(0.8);
  transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

<strong>JavaScript 扩展动画：</strong>
// 预设初始状态
actions.style.opacity = '0';
actions.style.transform = 'translateX(15px) scale(0.8)';

// 动画到最终状态
actions.style.opacity = '1';
actions.style.transform = 'translateX(0) scale(1)';

<strong>JavaScript 收缩动画：</strong>
actions.style.opacity = '0';
actions.style.transform = 'translateX(-15px) scale(0.8)';
            </div>

            <div class="expected-result">
                <strong>动画分析（已优化）：</strong>
                <ul>
                    <li>✅ 初始位置：translateX(15px) - 在右侧</li>
                    <li>✅ 显示位置：translateX(0) - 在正常位置</li>
                    <li>✅ 进入方向：从右向左滑入</li>
                    <li>✅ 退出方向：向左滑动消失 (translateX(-15px))</li>
                    <li>✅ 缩放效果：0.8 → 1.0 → 0.8</li>
                    <li>✅ 缓动函数：弹性效果</li>
                </ul>
            </div>
        </div>

        <div class="instructions">
            <h3>🔍 调试方法</h3>
            <ul>
                <li>打开浏览器开发者工具</li>
                <li>在 Console 中观察动画相关日志</li>
                <li>在 Elements 面板中检查 tooltip 元素的 transform 属性变化</li>
                <li>使用 Performance 面板录制动画过程</li>
                <li>检查 CSS transition 和 transform 的计算值</li>
            </ul>
        </div>
    </div>

    <script>
        // 添加调试辅助功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎯 Tooltip 图标动画方向测试页面已加载');

            // 监听 tooltip 状态变化
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' &&
                        mutation.attributeName === 'class' &&
                        mutation.target.classList.contains('lucid-tooltip')) {

                        const isExpanded = mutation.target.classList.contains('lucid-tooltip-expanded');
                        const actions = mutation.target.querySelector('.lucid-tooltip-actions');

                        if (actions) {
                            const transform = window.getComputedStyle(actions).transform;
                            const opacity = window.getComputedStyle(actions).opacity;

                            console.log(`📊 Tooltip 状态变化: ${isExpanded ? '扩展' : '收缩'}`, {
                                transform: transform,
                                opacity: opacity,
                                display: actions.style.display
                            });
                        }
                    }
                });
            });

            observer.observe(document.body, {
                childList: true,
                subtree: true,
                attributes: true,
                attributeFilter: ['class']
            });
        });
    </script>
</body>
</html>
